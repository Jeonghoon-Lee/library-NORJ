{% extends "base.html" %}

{% block page_title %}{{ subtitle }}{% endblock %}

{% block content %}
  <h2>{{ subtitle }}</h2>
  <form action="{{ url }}" method="post">
    <label for="Title">Title</label>
    <input type="text" name="Title" id="title" value="{{ book.Title }}"><br>
    <label for="Publisher">Publisher</label>
    <input type="text" name="Publisher" id="publisher" value="{{ book.Publisher }}"><br>
    <label for="Author">Author</label>
    <input type="text" name="Author" id="author" value="{{ book.Author }}"><br>
    <label for="Year">Year</label>
    <input type="number" name="Year" id="year" value="{{ book.Year }}"><br>
    <label for="LangID">Language</label>
    <select name="LangID" id="language">
      {% for lang in languages %}
        <option value="{{ lang.LangID }}" {% if book.LangID == lang.LangID %}selected{% endif %}>
          {{ lang.LangDescrip }}
        </option>
      {% endfor %}
    </select><br>
    <label for="CategoryID">Category</label>
    <select name="CategoryID" id="category">
      {% for category in categories %}
        <option value="{{ category.CategoryID }}" {% if book.CategoryID == category.CategoryID %}selected{% endif %}>
          {{ category.CategoryDescrip }}
        </option>
      {% endfor %}
    </select><br>

    <input type="radio" name="AgeRating" value="0" {% if book.AgeRating == 0 %}checked{% endif %}>All Age
    <input type="radio" name="AgeRating" value="1" {% if book.AgeRating == 1 %}checked{% endif %}>Adult Only<br>

    <label for="BookStatus">Book Status</label>
    <select name="BookStatus" id="status">
      {% set bookStatus = ["available", "reserved", "loaned"] %}
      {% for status in bookStatus %}
        <option value="{{ status }}" {% if book.BookStatus == status %}selected{% endif %}>
          {{ status }}
        </option>
      {% endfor %}
    </select><br>  

    <label for="Description">Description</label>
    <textarea name="Description" id="descipt" cols="60" rows="10">{{ book.Description }}</textarea><br>

    <label for="book-img">Book Photo:</label>
    <input type="file" id="book-img" name="image" value=""><br>
    <!-- book image display area -->
    <div class="book-image">
      {% if book.ISBN != null %}
        {% if book.BookImage != null %}
          <img src="public/img/{{ book.BookImage }}" alt="Cover image of the {{ book.Title }}"></div>
        {% else %}
          <img src="public/img/no_image_book.png" alt="Cover image of the {{ book.Title }}"></div>     
        {% endif %}
      {% endif %}
    </div>

    <input type="hidden" name="ISBN" value="{{ book.ISBN }}">
    <input type="hidden" name="BookImage" value="{{ book.BookImage }}">

    <button type="submit">Register book</button>
    <button type="reset">Reset</button>
  </form>
{% endblock content %}

{% block javascripts %}
  <script src="public/js/upload_file.js"></script>
  <script src="public/js/manage_book.js"></script>
{% endblock %}

